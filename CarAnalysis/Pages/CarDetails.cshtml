@page
@model CarAnalysis.Pages.CarDetailsModel
@{
    ViewData["Title"] = $"{Model.Car.CarCategory} | {Model.Car.CarName}";
}
<section class="layout_padding car-details">
    <div class="container">
        <div class="heading_container">
            <h2>@Model.Car.CarName</h2>
            <hr>
        </div>
        <div class="car-description">
            <p>@Model.Car.Description</p>
        </div>

        <div class="heading_container">
            <h2>گالری تصاویر</h2>
            <hr>
        </div>
        <div class="car-gallery">
            @* Gallery of car images *@
            @foreach (var picture in Model.CarPictures)
            {
                <div class="gallery-item">
                    <a href="#lightbox-@picture.Id" class="gallery-link">
                        <img src="@picture.Picture" alt="@picture.PictureAlt" title="@picture.PictureTitle" data-id="@picture.Id" />
                    </a>
                </div>
            }
        </div>
        <div class="car-specifications">
            <div class="heading_container">
                <h2>مشخصات فنی @Model.Car.CarName</h2>
                <hr>
            </div>
            <table class="specifications-table">
                <tbody>
                    <tr><th>کشور سازنده</th><td>@Model.Car.ProducingCountry</td></tr>
                    <tr><th>نوع بدنه</th><td>@Model.Car.BodyClass</td></tr>
                    <tr><th>وزن</th><td>@Model.Car.Weight</td></tr>
                    <tr><th>ظرفیت مسافر</th><td>@Model.Car.PassengerSpaces</td></tr>
                    <tr><th>حجم موتور</th><td>@Model.Car.EngineVolume</td></tr>
                    <tr><th>نوع موتور</th><td>@Model.Car.EngineType</td></tr>
                    <tr><th>سیلندرها</th><td>@Model.Car.Cylinders</td></tr>
                    <tr><th>سوپاپ‌ها</th><td>@Model.Car.Valves</td></tr>
                    <tr><th>آرایش سیلندرها</th><td>@Model.Car.ArrangementOfCylinders</td></tr>
                    <tr><th>سیستم سوخت</th><td>@Model.Car.FuelSystem</td></tr>
                    <tr><th>حداکثر قدرت خروجی</th><td>@Model.Car.MaximumOutputPower</td></tr>
                    <tr><th>حداکثر گشتاور خروجی</th><td>@Model.Car.MaximumOutputTorque</td></tr>
                    <tr><th>ظرفیت مخزن سوخت</th><td>@Model.Car.TankCapacity</td></tr>
                    <tr><th>نوع گیربکس</th><td>@Model.Car.TypeOfGearbox</td></tr>
                    <tr><th>تعداد دنده‌ها</th><td>@Model.Car.NumberOfGears</td></tr>
                    <tr><th>سیستم حرکت خودرو</th><td>@Model.Car.VehicleMotionSystem</td></tr>
                    <tr><th>نوع دیسک جلو</th><td>@Model.Car.FrontDiskType</td></tr>
                    <tr><th>نوع دیسک عقب</th><td>@Model.Car.RearDiskType</td></tr>
                    <tr><th>جذب‌کننده ضربات جلو</th><td>@Model.Car.FrontShockAbsorbers</td></tr>
                    <tr><th>جذب‌کننده ضربات عقب</th><td>@Model.Car.RearShockAbsorbers</td></tr>
                    <tr><th>نوع سیستم فرمان</th><td>@Model.Car.TypeOfSteeringSystem</td></tr>
                    <tr><th>حداکثر سرعت</th><td>@Model.Car.MaximumSpeed</td></tr>
                    <tr><th>شتاب 0 تا 100</th><td>@Model.Car.AccelerationFrom0To100</td></tr>
                    <tr><th>مصرف سوخت شهری</th><td>@Model.Car.UrbanFuelConsumption</td></tr>
                    <tr><th>مصرف سوخت جاده‌ای</th><td>@Model.Car.RoadFuelConsumption</td></tr>
                    <tr><th>مصرف سوخت ترکیبی</th><td>@Model.Car.CombinedFuelConsumption</td></tr>
                    <tr><th>استاندارد آلایندگی</th><td>@Model.Car.EmissionStandard</td></tr>
                    <tr><th>ستاره ایمنی</th><td>@Model.Car.SafetyStar</td></tr>
                    <tr><th>کیسه‌های هوا</th><td>@Model.Car.Airbags</td></tr>
                    <tr><th>سیستم‌های پایداری و کمک‌راننده</th><td>@Model.Car.StabilityAndDriverAssistanceSystems</td></tr>
                    <tr><th>سیستم‌های امنیتی و حفاظتی</th><td>@Model.Car.SecurityAndProtectionSystems</td></tr>
                    <tr><th>سیستم‌های تهویه هوا</th><td>@Model.Car.AirConditioningSystems</td></tr>
                    <tr><th>سیستم‌های صوتی و تصویری</th><td>@Model.Car.AudioAndVideoSystem</td></tr>
                    <tr><th>سیستم‌های چندرسانه‌ای</th><td>@Model.Car.MultimediaSystems</td></tr>
                    <tr><th>سیستم صندلی جلو</th><td>@Model.Car.FrontSeatSystem</td></tr>
                    <tr><th>سیستم صندلی عقب</th><td>@Model.Car.RearSeatSystem</td></tr>
                    <tr><th>سیستم آینه</th><td>@Model.Car.MirrorSystem</td></tr>
                    <tr><th>سیستم شیشه‌ها</th><td>@Model.Car.GlasssSystem</td></tr>
                    <tr><th>سیستم سقف</th><td>@Model.Car.RoofSystems</td></tr>
                    <tr><th>سیستم روشنایی جلو</th><td>@Model.Car.FrontLightingSystem</td></tr>
                    <tr><th>سیستم روشنایی عقب</th><td>@Model.Car.RearLightingSystem</td></tr>
                    <tr><th>سیستم‌های کمک‌رانندگی</th><td>@Model.Car.DrivingAssistanceSystems</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</section>
<section class="comments_section">
    <div class="container">
        <div class="heading_container">
            <h2>کامنت ها</h2>
            <hr>
        </div>
        <div class="comment_form">
            <h3>کامنت بگذارید</h3>
            <form method="post">
                <div class="form_group">
                    <label for="Name">نام :</label>
                    <input type="text" id="Name" name="Name" required>
                </div>
                <div class="form_group">
                    <label for="Email">ایمیل :</label>
                    <input type="email" id="Email" name="Email" required>
                </div>
                <div class="form_group">
                    <label for="Message">پیام :</label>
                    <textarea id="Message" name="Message" required></textarea>
                </div>
                <input type="hidden" name="ParentId" id="ParentId" value="@Model.Car.Id" />
                <button type="submit" class="btn btn-primary">ارسال</button>
            </form>
        </div>
        <div class="comments_list">
            @foreach (var comment in Model.Comments)
            {
                <div class="comment">
                    <div class="comment_header">
                        <img class="comment_icon" src="https://car.last-cdn.com/placeholders/user.svg"></img>
                        <span class="comment_name">@comment.Name</span>
                    </div>
                    <div class="comment_body">
                        <p>@comment.Message</p>
                    </div>
                    <hr>
                </div>
            }
        </div>
    </div>
</section>
<!-- Lightbox Modal -->
<div id="lightbox" class="lightbox">
    <a href="#" class="lightbox-close">&times;</a>
    <a href="#" class="lightbox-prev">&lt;</a>
    <a href="#" class="lightbox-next">&gt;</a>
    <img src="" alt="" id="lightbox-image" />
</div>
<style>
    /* Car Description */
    .car-description p {
        font-size: 1.2rem;
        line-height: 1.6;
        color: #666;
        margin-bottom: 30px;
    }

    /* Car Gallery */
    .car-gallery {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 30px;
    }

        .car-gallery .gallery-item {
            flex: 1 1 calc(33.333% - 10px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
        }

        .car-gallery img {
            width: 100%;
            height: auto;
            display: block;
        }

    /* Lightbox Modal */
    .lightbox {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }

        .lightbox img {
            max-width: 200%;
            max-height: 200%;
        }

        .lightbox:target {
            display: flex;
        }

    .lightbox-close {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 3rem;
        color: #fff;
        text-decoration: none;
    }

    .lightbox-prev,
    .lightbox-next {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 2rem;
        color: #fff;
        text-decoration: none;
        cursor: pointer;
    }

    .lightbox-prev {
        left: 30px;
    }

    .lightbox-next {
        right: 30px;
    }

    /* Car Specifications */
    .car-specifications h2 {
        font-size: 1.8rem;
        font-weight: bold;
        color: #333;
        margin-bottom: 20px;
    }

    .car-specifications th,
    .car-specifications td {
        text-align: right;
        padding: 10px;
        border-bottom: 1px solid #ddd;
    }

    .car-specifications th {
        background-color: #f4f4f4;
        font-weight: bold;
        color: #333;
    }

    .car-specifications td {
        background-color: #fff;
        color: #666;
    }

    .car-specifications tr:hover {
        background-color: #f1f1f1;
    }

    .comments_section .heading_container h2 {
        font-size: 2rem;
        font-weight: bold;
        color: #333;
        text-align: center;
        margin-bottom: 20px;
    }

    .comments_section .heading_container hr {
        width: 50px;
        height: 3px;
        background-color: #03de1c;
        margin: 0 auto 30px auto;
        border: none;
    }

    .comment_form {
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
    }

        .comment_form h3 {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 20px;
        }

        .comment_form .form_group {
            margin-bottom: 15px;
        }

        .comment_form label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .comment_form input,
        .comment_form textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .comment_form button {
            background: #03de1c;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

            .comment_form button:hover {
                background: #029a10;
            }

    .comments_list .comment {
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
    }

    .comments_list .comment_header {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }

    .comments_list .comment_icon {
        width: 40px;
        height: 40px;
        color: #03de1c;
        border-radius: 25px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-left: 10px;
    }

    .comments_list .comment_name {
        font-size: 1.1rem;
        font-weight: bold;
        margin-right: 10px;
    }

    .comments_list .comment_email {
        font-size: 0.9rem;
        color: #777;
    }

    .comments_list .comment_body {
        font-size: 1rem;
        color: #333;
    }

    .comments_list .comment hr {
        border: none;
        border-top: 1px solid #eee;
        margin: 20px 0;
    }


    /*    .specifications-table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 30px;
                font-size: 1rem;
                color: #333;
                box-shadow: 0 0 15px rgba(0,0,0,0.1);
                background: #fff;
                border-radius: 10px;
                overflow: hidden;
            }

                .specifications-table thead {
                    background-color: #f4f4f4;
                    text-align: right;
                    color: #333;
                }

                .specifications-table th, .specifications-table td {
                    display: flex;
                    text-align: right;
                    gap: 5px;
                    font-size: 18px;
                    padding: 10px 20px;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    border-radius: 25px; /* Added for oval shape */
    }

    /*        .specifications-table th {
                    font-weight: bold;
                    color: #029a10;
                }

                .specifications-table tr:hover {
                    background-color: #f9f9f9;
                }

                .specifications-table i {
                    margin-right: 8px;
                    color: #03de1c;
                }*/

    .specifications-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 30px;
        font-size: 1rem;
        color: #333;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
        background: #fff;
        border-radius: 10px;
        overflow: hidden;
    }

        .specifications-table th {
            display: inline-block;
            width: 25%;
            text-align: right;
            gap: 5px;
            font-size: 18px;
            padding: 10px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 25px; /* Added for oval shape */
            border-bottom: 1px solid #e0e0e0;
        }

        .specifications-table td {
            display: inline-block;
            width: 75%;
            text-align: right;
            gap: 5px;
            font-size: 18px;
            padding: 10px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 25px; /* Added for oval shape */
            border-bottom: 1px solid #e0e0e0;
        }

        .specifications-table th {
            font-weight: bold;
            color: #029a10;
            background-color: #f4f4f4;
        }

        .specifications-table tr:hover {
            background-color: #f9f9f9;
        }

        .specifications-table i {
            margin-right: 8px;
            color: #03de1c;
        }

</style>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const galleryLinks = document.querySelectorAll('.gallery-link');
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightbox-image');
        const lightboxPrev = document.querySelector('.lightbox-prev');
        const lightboxNext = document.querySelector('.lightbox-next');
        let currentIndex;

        const images = [];
        galleryLinks.forEach((link, index) => {
            const img = link.querySelector('img');
            images.push({ src: img.src, alt: img.alt });
            link.addEventListener('click', (e) => {
                e.preventDefault();
                currentIndex = index;
                updateLightbox();
            });
        });

        function updateLightbox() {
            const { src, alt } = images[currentIndex];
            lightboxImage.src = src;
            lightboxImage.alt = alt;
            lightbox.style.display = 'flex';
        }

        lightboxPrev.addEventListener('click', (e) => {
            e.preventDefault();
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            updateLightbox();
        });

        lightboxNext.addEventListener('click', (e) => {
            e.preventDefault();
            currentIndex = (currentIndex + 1) % images.length;
            updateLightbox();
        });

        document.querySelector('.lightbox-close').addEventListener('click', (e) => {
            e.preventDefault();
            lightbox.style.display = 'none';
        });
    });
</script>
